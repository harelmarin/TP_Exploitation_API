package controller

import (
	"net/http"
	spotify "spotify/Spotify"
	initTemplate "spotify/templates"
)

func DataIndex(w http.ResponseWriter, r *http.Request) {
	initTemplate.Temp.ExecuteTemplate(w, "index", nil)
}

func TreatmentIndex(w http.ResponseWriter, r *http.Request) {
	if r.Method != http.MethodPost {
		http.Redirect(w, r, "/index", http.StatusPermanentRedirect)
		return
	}
	UserToken := r.FormValue("UserToken")
	Artiste := r.FormValue("Artiste")

	switch Artiste {
	case "JUL":
		http.Redirect(w, r, "/album/jul", http.StatusPermanentRedirect)
		spotify.JUL.UserToken = UserToken
	case "SDM":
		spotify.SDM.UserToken = r.FormValue("UserToken")
		http.Redirect(w, r, "/track/sdm", http.StatusPermanentRedirect)
	default:
		http.Redirect(w, r, "/index", http.StatusPermanentRedirect)
	}
}
